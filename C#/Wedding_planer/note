


<div class="logreg">
        <h3>Login</h3>
        <form asp-action="" asp-controller="Home" method="post">
            <span asp-validation-for="email"></span>
            <br> Email:
            <input type="text" asp-for="email">
            <br>
            <span asp-validation-for="password"></span>
            <br> Password:
            <input type="password" asp-for="password">
            <br>
            <input type="submit" value="submit">
        </form>
</div>


@if(@item.user.UserId==@ViewBag.userid){
                <a href="#">delete</a>
            }
            else{
                @foreach(var subitem in @item.guests){
                    @if(@subitem.UserId==@ViewBag.userid){
                        <a href="#">Un-RSVP</a>
                    }else{
                        <a href="#">RSVP</a>
                    }
                }
            }
    


[HttpPost]
        public IActionResult Index(users user){
            if(ModelState.IsValid){
                users result=_context.users.SingleOrDefault(users=>users.email==user.email);
            if(result!=null){
                    var Hasher = new PasswordHasher<users>();
                    if(0 != Hasher.VerifyHashedPassword(result, result.password, user.password))
                    {
                        HttpContext.Session.SetInt32("userid", result.UserId);
                        HttpContext.Session.SetString("username", result.firstname);
                        return RedirectToAction("dashboard");
                    }
                    else{
                        ViewBag.err="Password did not match";
                        return View("Index");
                    }
                }
                else{
                    ViewBag.err="no match email";
                    return View("Index");
                }
            }else{
                return View(user);
            }
            
            }

